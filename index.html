<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weave — Deterministic Execution for Reproducible Debugging</title>
<meta name="description" content="Deterministic execution for reproducible debugging—for AI agents and humans.">
<meta property="og:title" content="Weave — Deterministic Execution">
<meta property="og:description" content="Deterministic execution for reproducible debugging—for AI agents and humans.">
<meta property="og:type" content="website">
<style>
/* ── Reset & Base ──────────────────────────────────────────── */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg:       #0b0b0f;
  --bg-card:  #13131a;
  --border:   #1e1e2a;
  --text:     #c9c9d6;
  --text-dim: #6b6b80;
  --heading:  #eeeef2;
  --accent:   #38d9a9;
  --accent2:  #20c997;
  --mono:     "SF Mono", "Cascadia Code", "Fira Code", "JetBrains Mono", ui-monospace, monospace;
  --sans:     "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

html { scroll-behavior: smooth; }

body {
  font-family: var(--sans);
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
}

a { color: var(--accent); text-decoration: none; }
a:hover { color: var(--accent2); }

/* ── Nav ───────────────────────────────────────────────────── */
nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 2rem;
  background: rgba(11, 11, 15, 0.85);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
}

.nav-logo {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-family: var(--mono);
  font-weight: 700;
  font-size: 1.1rem;
  color: var(--heading);
}

.nav-logo img {
  width: 28px;
  height: 28px;
  border-radius: 6px;
}

.nav-links {
  display: flex;
  gap: 1.8rem;
  list-style: none;
  font-size: 0.9rem;
}

.nav-links a { color: var(--text-dim); transition: color 0.2s; }
.nav-links a:hover { color: var(--heading); }

/* ── Layout ────────────────────────────────────────────────── */
section {
  max-width: 960px;
  margin: 0 auto;
  padding: 5rem 2rem;
}

/* ── Hero ──────────────────────────────────────────────────── */
.hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding-top: 10rem;
  padding-bottom: 1.5rem;
}

.hero-badge {
  display: inline-block;
  font-family: var(--mono);
  font-size: 0.75rem;
  color: var(--accent);
  border: 1px solid rgba(56, 217, 169, 0.25);
  border-radius: 100px;
  padding: 0.3rem 1rem;
  margin-bottom: 1.5rem;
  background: rgba(56, 217, 169, 0.06);
}

h1 {
  font-size: clamp(2.4rem, 5vw, 3.6rem);
  font-weight: 800;
  line-height: 1.15;
  color: var(--heading);
  margin-bottom: 1.2rem;
  letter-spacing: -0.03em;
}

h1 .accent { color: var(--accent); font-size: 0.65em; }

.hero-sub {
  font-size: 1.15rem;
  color: var(--text-dim);
  max-width: 540px;
  margin-bottom: 2.5rem;
}

.cta-row {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  justify-content: center;
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.7rem 1.6rem;
  border-radius: 8px;
  font-size: 0.95rem;
  font-weight: 600;
  transition: all 0.2s;
  border: 1px solid transparent;
}

.btn-primary {
  background: var(--accent);
  color: #0b0b0f;
}
.btn-primary:hover { background: var(--accent2); color: #0b0b0f; }

.btn-secondary {
  background: transparent;
  color: var(--text);
  border-color: var(--border);
}
.btn-secondary:hover { border-color: var(--text-dim); color: var(--heading); }

.btn svg { width: 18px; height: 18px; }

/* ── Terminal ──────────────────────────────────────────────── */
.terminal {
  width: 100%;
  max-width: 620px;
  margin: 2rem auto 0;
  background: #111118;
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0,0,0,0.4);
}

.terminal-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 0.7rem 1rem;
  background: #161620;
  border-bottom: 1px solid var(--border);
}

.terminal-dot {
  width: 10px; height: 10px;
  border-radius: 50%;
}
.terminal-dot.r { background: #ff5f57; }
.terminal-dot.y { background: #febc2e; }
.terminal-dot.g { background: #28c840; }

.terminal-body {
  padding: 1.2rem 1.4rem;
  font-family: var(--mono);
  font-size: 0.85rem;
  line-height: 1.8;
  min-height: 130px;
  text-align: left;
}

.terminal-body .prompt { color: var(--accent); }
.terminal-body .cmd    { color: var(--heading); }
.terminal-body .out    { color: var(--text-dim); }

.terminal-line {
  opacity: 0;
  animation: termFadeIn 0.3s ease forwards;
}

@keyframes termFadeIn {
  to { opacity: 1; }
}

/* ── Problem / Solution ────────────────────────────────────── */
.split {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2.5rem;
  margin-top: 2rem;
}

.split-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 2rem;
}

.split-card h3 {
  font-size: 1.05rem;
  color: var(--heading);
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.split-card ul {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 0.7rem;
}

.split-card li {
  padding-left: 1.4rem;
  position: relative;
  font-size: 0.92rem;
}

.split-card li::before {
  position: absolute;
  left: 0;
  font-size: 0.85rem;
}

.card-problem li::before { content: "\2717"; color: #f06595; }
.card-solution li::before { content: "\2713"; color: var(--accent); }

/* ── How It Works ──────────────────────────────────────────── */
.section-label {
  font-family: var(--mono);
  font-size: 0.8rem;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 0.6rem;
}

h2 {
  font-size: clamp(1.6rem, 3vw, 2.2rem);
  font-weight: 700;
  color: var(--heading);
  margin-bottom: 1rem;
  letter-spacing: -0.02em;
}

.section-desc {
  color: var(--text-dim);
  max-width: 600px;
  margin-bottom: 2.5rem;
  font-size: 1rem;
}

.steps {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.5rem;
  margin-top: 2rem;
}

.step {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1.6rem;
}

.step-num {
  font-family: var(--mono);
  font-size: 0.75rem;
  color: var(--accent);
  background: rgba(56, 217, 169, 0.08);
  border: 1px solid rgba(56, 217, 169, 0.2);
  width: 28px; height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.step h4 {
  font-size: 0.95rem;
  color: var(--heading);
  margin-bottom: 0.5rem;
}

.step p {
  font-size: 0.85rem;
  color: var(--text-dim);
  line-height: 1.6;
}

/* ── Audience ──────────────────────────────────────────────── */
.audience-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-top: 2rem;
}

.audience-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 2rem;
}

.audience-card .icon {
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.audience-card h3 {
  font-size: 1.1rem;
  color: var(--heading);
  margin-bottom: 0.6rem;
}

.audience-card p {
  font-size: 0.9rem;
  color: var(--text-dim);
  line-height: 1.6;
}

/* ── Install ───────────────────────────────────────────────── */
.install-section { text-align: center; padding-top: 2rem; }

.install-block {
  display: inline-flex;
  align-items: center;
  gap: 1rem;
  background: #111118;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 1rem 1.6rem;
  margin-top: 1.5rem;
  font-family: var(--mono);
  font-size: 0.9rem;
  color: var(--heading);
}

.install-block .dollar { color: var(--accent); user-select: none; }

.copy-btn {
  background: none;
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text-dim);
  padding: 0.3rem 0.5rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
}
.copy-btn:hover { color: var(--heading); border-color: var(--text-dim); }

.copy-btn svg { width: 16px; height: 16px; }


/* ── Footer ────────────────────────────────────────────────── */
footer {
  max-width: 960px;
  margin: 0 auto;
  padding: 2rem;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 0.82rem;
  color: var(--text-dim);
}

.footer-links {
  display: flex;
  gap: 1.5rem;
  list-style: none;
}

.footer-links a { color: var(--text-dim); }
.footer-links a:hover { color: var(--heading); }

/* ── Responsive ────────────────────────────────────────────── */
@media (max-width: 700px) {
  .split, .steps, .audience-grid { grid-template-columns: 1fr; }
  .hero { padding-top: 7rem; }
  nav { padding: 0.8rem 1.2rem; }
  section { padding: 3rem 1.2rem; }
  footer { flex-direction: column; gap: 1rem; text-align: center; }
}
</style>
</head>
<body>

<!-- ── Nav ──────────────────────────────────────────────────── -->
<nav>
  <a href="#" class="nav-logo">
    Weave
  </a>
  <ul class="nav-links">
    <li><a href="https://github.com/penberg/weave" target="_blank">
      <svg viewBox="0 0 16 16" width="18" height="18" fill="currentColor" style="vertical-align:middle">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
      </svg>
      GitHub
    </a></li>
  </ul>
</nav>

<!-- ── Hero ─────────────────────────────────────────────────── -->
<section class="hero">
  <h1>Reproducible debugging<br><span class="accent">for AI agents and humans</span></h1>
  <p class="hero-sub">
    Weave controls all sources of non-determinism in program execution&mdash;time, randomness, scheduling&mdash;so every run produces identical results.
  </p>
  <div class="cta-row">
    <a href="#install" class="btn btn-primary">Get Started</a>
    <a href="https://github.com/penberg/weave" class="btn btn-secondary" target="_blank">
      <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
      View on GitHub
    </a>
  </div>

  <!-- Terminal Demo -->
  <div class="terminal">
    <div class="terminal-bar">
      <span class="terminal-dot r"></span>
      <span class="terminal-dot y"></span>
      <span class="terminal-dot g"></span>
    </div>
    <div class="terminal-body" id="term"></div>
  </div>
</section>

<!-- ── Install ─────────────────────────────────────────────── -->
<section id="install" class="install-section">
  <div class="section-label">Get Started</div>
  <h2>Install Weave</h2>
  <p class="section-desc" style="margin-left:auto;margin-right:auto;">
    Install from source with Cargo, the Rust package manager.
  </p>

  <div class="install-block">
    <span class="dollar">$</span>
    <span id="install-cmd">cargo install --git https://github.com/penberg/weave</span>
    <button class="copy-btn" onclick="copyInstall()" aria-label="Copy to clipboard">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="9" y="9" width="13" height="13" rx="2"/>
        <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
      </svg>
    </button>
  </div>
</section>

<!-- ── Problem / Solution ──────────────────────────────────── -->
<section>
  <div class="section-label">Why Weave?</div>
  <h2>Non-determinism is the enemy of debugging</h2>

  <div class="split">
    <div class="split-card card-problem">
      <h3>The Problem</h3>
      <ul>
        <li>Bugs that vanish when you try to reproduce them</li>
        <li>System time, RNG, and scheduling cause unpredictable behavior</li>
        <li>Debugging becomes guesswork instead of engineering</li>
        <li>AI agents can't fix what they can't reproduce</li>
      </ul>
    </div>
    <div class="split-card card-solution">
      <h3>The Weave Solution</h3>
      <ul>
        <li>Every execution produces identical results</li>
        <li>All sources of randomness are intercepted and controlled</li>
        <li>Systematic debugging replaces trial and error</li>
        <li>Use a seed to explore different deterministic timelines</li>
      </ul>
    </div>
  </div>
</section>

<!-- ── How It Works ────────────────────────────────────────── -->
<section id="how-it-works">
  <div class="section-label">How It Works</div>
  <h2>Lightweight binary translation</h2>
  <p class="section-desc">
    Weave uses dynamic binary modification to intercept every source of non-determinism at the instruction level. No source code changes, no recompilation &mdash; just prefix your command with <code>weave</code>.
  </p>

  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <h4>Load</h4>
      <p>Weave loads the guest program and all its shared libraries into a dedicated address space, bypassing the system's dynamic linker.</p>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <h4>Translate</h4>
      <p>The binary translator rewrites code one basic block at a time, replacing system calls and non-deterministic instructions with deterministic equivalents.</p>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <h4>Execute</h4>
      <p>Translated code runs natively on the CPU. At each block boundary, the dispatcher routes execution to the next translated block.</p>
    </div>
  </div>
</section>

<!-- ── For AI Agents & Humans ──────────────────────────────── -->
<section>
  <div class="section-label">Who It's For</div>
  <h2>Built for AI agents and humans</h2>
  <p class="section-desc">
    Deterministic execution benefits anyone debugging complex systems.
  </p>

  <div class="audience-grid">
    <div class="audience-card">
      <div class="icon">&gt;_</div>
      <h3>AI Coding Agents</h3>
      <p>Agents need consistent, reproducible behavior to systematically debug code. Weave gives agents a stable foundation where every test run produces identical results, enabling reliable automated debugging loops.</p>
    </div>
    <div class="audience-card">
      <div class="icon">&hearts;</div>
      <h3>Human Developers</h3>
      <p>Stop chasing phantom bugs. With Weave, every run is identical, so you can methodically narrow down root causes instead of relying on luck to reproduce issues. Turn weeks of investigation into hours.</p>
    </div>
  </div>
</section>

<!-- ── Footer ──────────────────────────────────────────────── -->
<footer>
  <span>MIT License &middot; Weave</span>
  <ul class="footer-links">
    <li><a href="https://github.com/penberg/weave" target="_blank">GitHub</a></li>
    <li><a href="https://github.com/penberg/weave/issues" target="_blank">Issues</a></li>
    <li><a href="https://github.com/penberg/weave/blob/main/LICENSE.md" target="_blank">License</a></li>
  </ul>
</footer>

<!-- ── Scripts ─────────────────────────────────────────────── -->
<script>
// Terminal animation
const lines = [
  { type: 'input',  text: 'weave /bin/date' },
  { type: 'output', text: 'Sun Mar 10 01:34:50 EET 2041' },
  { type: 'blank' },
  { type: 'input',  text: 'weave /bin/date' },
  { type: 'output', text: 'Sun Mar 10 01:34:50 EET 2041' },
  { type: 'blank' },
  { type: 'comment', text: '# Same output, every time.' },
];

const term = document.getElementById('term');
let lineIndex = 0;

function typeText(el, text, speed, cb) {
  let i = 0;
  function tick() {
    if (i < text.length) {
      el.textContent += text[i];
      i++;
      setTimeout(tick, speed);
    } else if (cb) {
      cb();
    }
  }
  tick();
}

function renderLine() {
  if (lineIndex >= lines.length) return;

  const line = lines[lineIndex];
  const div = document.createElement('div');
  div.className = 'terminal-line';
  div.style.animationDelay = '0s';

  if (line.type === 'blank') {
    div.innerHTML = '&nbsp;';
    term.appendChild(div);
    lineIndex++;
    setTimeout(renderLine, 200);
  } else if (line.type === 'input') {
    div.innerHTML = '<span class="prompt">$ </span><span class="cmd"></span>';
    term.appendChild(div);
    const cmdSpan = div.querySelector('.cmd');
    typeText(cmdSpan, line.text, 40, () => {
      lineIndex++;
      setTimeout(renderLine, 300);
    });
  } else if (line.type === 'output') {
    div.innerHTML = '<span class="out"></span>';
    term.appendChild(div);
    const outSpan = div.querySelector('.out');
    outSpan.textContent = line.text;
    lineIndex++;
    setTimeout(renderLine, 600);
  } else if (line.type === 'comment') {
    div.innerHTML = '<span class="out"></span>';
    term.appendChild(div);
    const outSpan = div.querySelector('.out');
    outSpan.style.color = 'var(--accent)';
    typeText(outSpan, line.text, 30, () => {
      lineIndex++;
    });
  }
}

setTimeout(renderLine, 600);

// Copy install command
function copyInstall() {
  const text = document.getElementById('install-cmd').textContent;
  navigator.clipboard.writeText(text);
  const btn = document.querySelector('.copy-btn');
  btn.innerHTML = '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="var(--accent)" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
  setTimeout(() => {
    btn.innerHTML = '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>';
  }, 2000);
}
</script>
</body>
</html>
